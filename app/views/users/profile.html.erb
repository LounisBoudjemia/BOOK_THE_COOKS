
<div id="body">
  <div id="username" class="d-flex justify-content-center">
    <h1><%= @user.username %></h1>
  </div>
  <div id="container-bookings-services" class="d-flex justify-content-center">
    <% if @my_bookings.length > 0 %>
    <div id="my-bookings">
      <div class="d-flex justify-content-center">
          <h2>My Bookings</h2>
      </div>
      <div id="my-bookings-list">
        <ul>
          <% @my_bookings.each do |booking| %>
            <li>
              <div class="card m-3" style="width: 18rem;">
                <div class="card-body">
                  <div class="d-flex justify-content-center">
                    <h5 class="card-title"><%= booking.name %></h5>
                  </div>
                  <div>
                    <p class="card-text"><%= booking.date %></p>
                    <% service = Service.find_by id: booking.service_id %>
                    <p class="card-text"><%= service.name %></p>
                    <%= link_to "Cancel Booking",
                      booking_path(booking),
                      data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}
                    %>
                  </div>
                </div>
              </div>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
    <!-- BOOKINGS -->



        <div id="my-bookings-cards">

        </div>
      </div>
    <% end %>
    <!-- SERVICES -->
    <% if @my_services.length > 0 %>
      <div id="my_services">
        <div class="d-flex justify-content-center">
          <h2>My Services</h2>
        </div>
        <div class="my-services-cards">
          <% @my_services.each do |service| %>
            <div class="card m-3" style="width: 18rem;">
              <div class="card-body">
                <div class="d-flex justify-content-center">
                  <h5 class="card-title">
                    <%= link_to service.name, service_path(service), style: "text-decoration: none;  color: black;" %>
                  </h5>
                </div>
                <div>
                  <p class="card-text"><%= service.category %></p>
                  <p class="card-text"><%= service.rating %></p>
                  <% bookings_for_this_service = Booking.all.select { |booking| booking.service_id == service.id } %>
                  <p class="card-text">Bookings: <%= bookings_for_this_service.length %></p>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
    <!-- GIGS -->
    <% if @my_gigs.length > 0 %>
      <div id="my_gigs">
        <div class="d-flex justify-content-center">
          <h2>My Gigs</h2>
        </div>
        <div id="gig-cards">
          <% @my_gigs.each do |gig| %>
            <div class="card m-3" style="width: 18rem;">
              <div class="card-body">
                <div class="d-flex justify-content-center">
                  <h5 class="card-title"><%= gig.name %></h5>
                </div>
                <div>
                  <p class="card-text"><%= gig.date %></p>
                  <% booked_by = User.find_by id: gig.user_id %>
                  <p class="card-text">Booked by: <%= booked_by.username %></p>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
